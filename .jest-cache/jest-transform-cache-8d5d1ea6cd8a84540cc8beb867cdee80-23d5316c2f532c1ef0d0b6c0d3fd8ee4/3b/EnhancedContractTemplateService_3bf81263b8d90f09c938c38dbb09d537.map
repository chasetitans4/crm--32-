{"version":3,"names":["EnhancedContractTemplateService","cov_1mxjfxp21p","f","s","default","_default","templates","id","name","description","category","sections","introduction","scope","deliverables","timeline","payment","terms","signatures","defaultPaymentStructure","type","schedule","milestoneNumber","percentage","dependencies","placeholders","contract_date","required","client_name","provider_name","defaultValue","business_name","industry","page_count","features_list","start_date","end_date","total_amount","currency","payment_schedule","payment_terms","late_fee_percentage","additional_deliverables","intellectual_property_terms","client_responsibilities","provider_responsibilities","confidentiality_terms","termination_terms","dispute_resolution","governing_law","client_title","provider_title","isActive","createdAt","Date","toISOString","updatedAt","generateContractFromQuote","quote","templateId","b","template","find","t","Error","contractNumber","getFullYear","String","now","slice","paymentSchedule","generatePaymentSchedule","startDate","timelineWeeks","includes","Number","parseInt","split","endDate","setDate","getDate","contract","quoteId","clientId","undefined","clientName","businessName","clientEmail","contractTitle","totalAmount","finalPrice","scopeOfWork","pageCount","projectDetails","title","features","join","map","feature","originalQuoteData","budget","totalHours","requirements","additionalNotes","paymentStructure","paymentTerms","lateFeePercentage","contractTerms","serviceDescription","clientResponsibilities","providerResponsibilities","intellectualProperty","confidentiality","termination","disputeResolution","governingLaw","status","invoiceIds","totalInvoiced","totalPaid","baseAmount","templateSchedule","forEach","milestone","index","dueDate","Math","floor","length","push","amount","populateTemplate","populatedContent","fullTemplate","Object","values","placeholderValues","toLocaleDateString","item","toLocaleString","entries","key","value","placeholder","RegExp","replace","generateInvoiceFromMilestone","milestoneId","m","invoiceNumber","clientAddress","items","quantity","price","issueDate","notes","d","updateContractWithInvoice","invoice","updatedSchedule","invoiceId","reduce","sum","getTemplates","filter","getTemplate","validateContract","errors","totalPercentage","abs","isValid","generatePreview"],"sources":["C:\\Users\\chase\\Downloads\\crm (32)\\src\\services\\EnhancedContractTemplateService.tsx"],"sourcesContent":["import type { Quote, Contract, Invoice } from \"../schemas/contractInvoiceSchemas\"\n\n// Enhanced interfaces for unified system\nexport interface EnhancedContract {\n  // Core contract data\n  id: string\n  contractNumber: string\n  quoteId?: string\n  clientId?: string\n  clientName: string\n  clientEmail: string\n  contractTitle: string\n  startDate: Date\n  endDate: Date\n  contractTerms: {\n    serviceDescription: string\n    clientResponsibilities: string[]\n    providerResponsibilities: string[]\n    intellectualProperty: string\n    confidentiality: string\n    termination: string\n    disputeResolution: string\n    governingLaw: string\n  }\n  totalAmount: number\n  paymentSchedule: string\n  scopeOfWork: string\n\n  // Enhanced project details with quote data preservation\n  projectDetails: {\n    title: string\n    description: string\n    scope: string[]\n    deliverables: string[]\n    timeline: string\n    startDate: string\n    endDate: string\n\n    // Preserved quote data\n    originalQuoteData?: {\n      businessName: string\n      industry: string\n      pageCount: number\n      features: string[]\n      timeline: string\n      budget: string\n      finalPrice: number\n      totalHours: number\n      requirements: string\n      additionalNotes: string\n    }\n  }\n\n  // Payment structure for invoice generation\n  paymentStructure: {\n    type: \"single\" | \"deposit_final\" | \"milestone\" | \"progress\"\n    totalAmount: number\n    currency: string\n\n    // Payment schedule\n    schedule: PaymentMilestone[]\n\n    // Terms\n    paymentTerms: string\n    lateFeePercentage?: number\n    discountTerms?: string\n  }\n\n  // Contract terms\n  status: \"draft\" | \"sent\" | \"under_review\" | \"signed\" | \"active\" | \"completed\" | \"terminated\"\n  signedDate?: string\n  completedDate?: string\n\n  // Invoice tracking\n  invoiceIds: string[]\n  totalInvoiced: number\n  totalPaid: number\n\n  // Metadata\n  createdAt: string\n  updatedAt: string\n  createdBy?: string\n  lastModifiedBy?: string\n}\n\nexport interface PaymentMilestone {\n  id: string\n  milestoneNumber: number\n  name: string\n  description: string\n  percentage: number\n  amount: number\n  dueDate: string\n  deliverables: string[]\n  dependencies?: string[]\n  status: \"pending\" | \"in_progress\" | \"completed\" | \"invoiced\" | \"paid\"\n  invoiceId?: string\n  completedDate?: string\n}\n\nexport interface ContractTemplate {\n  id: string\n  name: string\n  description: string\n  category: \"web_design\" | \"web_development\" | \"full_service\" | \"maintenance\" | \"custom\"\n\n  // Template content with placeholders\n  sections: {\n    introduction: string\n    scope: string\n    deliverables: string\n    timeline: string\n    payment: string\n    terms: string\n    signatures: string\n  }\n\n  // Default payment structure\n  defaultPaymentStructure: {\n    type: \"single\" | \"deposit_final\" | \"milestone\" | \"progress\"\n    schedule: Omit<PaymentMilestone, \"id\" | \"amount\" | \"dueDate\" | \"status\">[]\n  }\n\n  // Placeholders for dynamic content\n  placeholders: {\n    [key: string]: {\n      description: string\n      type: \"text\" | \"number\" | \"date\" | \"list\" | \"currency\"\n      required: boolean\n      defaultValue?: any\n    }\n  }\n\n  isActive: boolean\n  createdAt: string\n  updatedAt: string\n}\n\n// Enhanced Contract Template Service\nexport class EnhancedContractTemplateService {\n  private static templates: ContractTemplate[] = [\n    {\n      id: \"web-design-template\",\n      name: \"Web Design & Development Contract\",\n      description: \"Comprehensive contract for web design and development projects\",\n      category: \"full_service\",\n      sections: {\n        introduction: `This Web Design and Development Agreement (\"Agreement\") is entered into on {{contract_date}} between {{client_name}} (\"Client\") and {{provider_name}} (\"Provider\") for the creation of a {{page_count}}-page website for {{business_name}} in the {{industry}} industry.`,\n        scope: `The Provider agrees to design and develop a professional website including:\\n\\n{{features_list}}\\n\\nThe website will be optimized for modern browsers and mobile devices, following current web standards and best practices.`,\n        deliverables: `The Provider will deliver:\\n\\n1. Custom website design mockups\\n2. Fully functional website with {{page_count}} pages\\n3. Content Management System (CMS) integration\\n4. Basic SEO optimization\\n5. Mobile-responsive design\\n6. {{additional_deliverables}}\\n\\nAll deliverables will be completed according to the project timeline outlined below.`,\n        timeline: `Project Timeline: {{timeline}}\\n\\nStart Date: {{start_date}}\\nEstimated Completion: {{end_date}}\\n\\nThe project will be completed in phases with regular client review and approval points. Any changes to the scope or timeline must be agreed upon in writing.`,\n        payment: `Total Project Cost: {{total_amount}} {{currency}}\\n\\nPayment Schedule:\\n{{payment_schedule}}\\n\\nPayment Terms: {{payment_terms}}\\nLate payments may incur a {{late_fee_percentage}}% monthly fee.`,\n        terms: `1. INTELLECTUAL PROPERTY\\n{{intellectual_property_terms}}\\n\\n2. CLIENT RESPONSIBILITIES\\n{{client_responsibilities}}\\n\\n3. PROVIDER RESPONSIBILITIES\\n{{provider_responsibilities}}\\n\\n4. CONFIDENTIALITY\\n{{confidentiality_terms}}\\n\\n5. TERMINATION\\n{{termination_terms}}\\n\\n6. DISPUTE RESOLUTION\\n{{dispute_resolution}}\\n\\n7. GOVERNING LAW\\n{{governing_law}}`,\n        signatures: `By signing below, both parties agree to the terms and conditions outlined in this agreement.\\n\\nCLIENT:\\n\\nSignature: ___________________________ Date: ___________\\nPrint Name: {{client_name}}\\nTitle: {{client_title}}\\n\\nPROVIDER:\\n\\nSignature: ___________________________ Date: ___________\\nPrint Name: {{provider_name}}\\nTitle: {{provider_title}}`,\n      },\n      defaultPaymentStructure: {\n        type: \"milestone\",\n        schedule: [\n          {\n            milestoneNumber: 1,\n            name: \"Project Initiation & Deposit\",\n            description: \"Project kickoff, requirements gathering, and initial design concepts\",\n            percentage: 40,\n            deliverables: [\"Project kickoff meeting\", \"Requirements document\", \"Initial wireframes\", \"Design concepts\"],\n            dependencies: [],\n          },\n          {\n            milestoneNumber: 2,\n            name: \"Design Approval\",\n            description: \"Final design approval and development initiation\",\n            percentage: 30,\n            deliverables: [\"Final design mockups\", \"Design system\", \"Client approval\", \"Development setup\"],\n            dependencies: [\"Milestone 1 completion\", \"Client feedback on designs\"],\n          },\n          {\n            milestoneNumber: 3,\n            name: \"Development & Launch\",\n            description: \"Website development, testing, and launch\",\n            percentage: 30,\n            deliverables: [\"Fully developed website\", \"Testing completion\", \"Launch\", \"Training and documentation\"],\n            dependencies: [\"Milestone 2 completion\", \"Content provided by client\"],\n          },\n        ],\n      },\n      placeholders: {\n        contract_date: { description: \"Contract signing date\", type: \"date\", required: true },\n        client_name: { description: \"Client full name or company name\", type: \"text\", required: true },\n        provider_name: {\n          description: \"Service provider name\",\n          type: \"text\",\n          required: true,\n          defaultValue: \"Your Company Name\",\n        },\n        business_name: { description: \"Client business name\", type: \"text\", required: true },\n        industry: { description: \"Client industry\", type: \"text\", required: true },\n        page_count: { description: \"Number of website pages\", type: \"number\", required: true },\n        features_list: { description: \"List of website features\", type: \"list\", required: true },\n        timeline: { description: \"Project timeline\", type: \"text\", required: true },\n        start_date: { description: \"Project start date\", type: \"date\", required: true },\n        end_date: { description: \"Project end date\", type: \"date\", required: true },\n        total_amount: { description: \"Total project cost\", type: \"currency\", required: true },\n        currency: { description: \"Currency code\", type: \"text\", required: true, defaultValue: \"USD\" },\n        payment_schedule: { description: \"Payment milestone schedule\", type: \"text\", required: true },\n        payment_terms: { description: \"Payment terms\", type: \"text\", required: true, defaultValue: \"Net 30\" },\n        late_fee_percentage: { description: \"Late fee percentage\", type: \"number\", required: false, defaultValue: 1.5 },\n        additional_deliverables: { description: \"Additional project deliverables\", type: \"list\", required: false },\n        intellectual_property_terms: {\n          description: \"IP ownership terms\",\n          type: \"text\",\n          required: true,\n          defaultValue: \"Upon full payment, all intellectual property rights transfer to the Client.\",\n        },\n        client_responsibilities: { description: \"Client responsibilities\", type: \"list\", required: true },\n        provider_responsibilities: { description: \"Provider responsibilities\", type: \"list\", required: true },\n        confidentiality_terms: { description: \"Confidentiality agreement terms\", type: \"text\", required: true },\n        termination_terms: { description: \"Contract termination terms\", type: \"text\", required: true },\n        dispute_resolution: { description: \"Dispute resolution process\", type: \"text\", required: true },\n        governing_law: { description: \"Governing law jurisdiction\", type: \"text\", required: true },\n        client_title: { description: \"Client title/position\", type: \"text\", required: false },\n        provider_title: {\n          description: \"Provider title/position\",\n          type: \"text\",\n          required: false,\n          defaultValue: \"Owner/Director\",\n        },\n      },\n      isActive: true,\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n    },\n  ]\n\n  // Generate enhanced contract from quote\n  static generateContractFromQuote(quote: Quote, templateId = \"web-design-template\"): EnhancedContract {\n    const template = this.templates.find((t) => t.id === templateId)\n    if (!template) {\n      throw new Error(`Template ${templateId} not found`)\n    }\n\n    const contractNumber = `CON-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`\n\n    // Generate payment schedule based on quote amount and template\n    const paymentSchedule = this.generatePaymentSchedule(quote, template)\n\n    // Calculate timeline dates\n    const startDate = new Date()\n    const timelineWeeks = quote.timeline.includes(\"week\")\n      ? Number.parseInt(quote.timeline.split(\"-\")[0]) || 4\n      : quote.timeline.includes(\"month\")\n        ? (Number.parseInt(quote.timeline.split(\"-\")[0]) || 2) * 4\n        : 8\n    const endDate = new Date(startDate)\n    endDate.setDate(startDate.getDate() + timelineWeeks * 7)\n\n    const contract: EnhancedContract = {\n      id: `contract-${Date.now()}`,\n      contractNumber,\n        quoteId: quote.id,\n        clientId: undefined, // Quote doesn't have clientId, only clientName\n        clientName: quote.clientName || quote.businessName,\n        clientEmail: quote.clientEmail || quote.clientName || \"client@example.com\",\n        contractTitle: `Website Development Contract - ${quote.businessName}`,\n        startDate: startDate,\n        endDate: endDate,\n\n        totalAmount: quote.finalPrice,\n        paymentSchedule: \"Payment schedule as outlined in payment structure.\",\n        scopeOfWork: `Development of ${quote.pageCount} page website with specified features.`,\n\n        projectDetails: {\n        title: `${quote.businessName} Website Design & Development`,\n        description: `Professional ${quote.pageCount}-page website for ${quote.businessName} in the ${quote.industry} industry, featuring ${quote.features.join(\", \")}.`,\n        scope: [\n          `Design and develop ${quote.pageCount} custom web pages`,\n          ...quote.features.map((feature) => `Implement ${feature}`),\n          \"Mobile-responsive design\",\n          \"Basic SEO optimization\",\n          \"Content management system integration\",\n          \"Cross-browser compatibility testing\",\n        ],\n        deliverables: [\n          \"Custom website design mockups\",\n          `Fully functional ${quote.pageCount}-page website`,\n          \"Content Management System (CMS)\",\n          \"Mobile-responsive design\",\n          \"Basic SEO setup\",\n          \"Website documentation and training\",\n          \"Post-launch support (30 days)\",\n        ],\n        timeline: quote.timeline,\n        startDate: startDate.toISOString().split(\"T\")[0],\n        endDate: endDate.toISOString().split(\"T\")[0],\n\n        originalQuoteData: {\n          businessName: quote.businessName,\n          industry: quote.industry,\n          pageCount: quote.pageCount,\n          features: quote.features,\n          timeline: quote.timeline,\n          budget: quote.budget || \"\",\n          finalPrice: quote.finalPrice,\n          totalHours: quote.totalHours || 0,\n          requirements: \"\",\n          additionalNotes: \"\",\n        },\n      },\n\n      paymentStructure: {\n        type: quote.finalPrice < 5000 ? \"deposit_final\" : quote.finalPrice < 15000 ? \"milestone\" : \"milestone\",\n        totalAmount: quote.finalPrice,\n        currency: \"USD\",\n        schedule: paymentSchedule,\n        paymentTerms: \"Net 30\",\n        lateFeePercentage: 1.5,\n      },\n\n      contractTerms: {\n        serviceDescription: `Professional web design and development services for ${quote.businessName}, including custom design, development, and launch of a ${quote.pageCount}-page website with specified features and functionality.`,\n        clientResponsibilities: [\n          \"Provide all necessary content, images, and materials in a timely manner\",\n          \"Review and provide feedback on designs and development within 5 business days\",\n          \"Provide access to hosting and domain accounts as needed\",\n          \"Make timely payments according to the agreed schedule\",\n          \"Communicate any changes or concerns promptly\",\n        ],\n        providerResponsibilities: [\n          \"Deliver all agreed-upon features and functionality\",\n          \"Ensure website is mobile-responsive and cross-browser compatible\",\n          \"Provide regular project updates and maintain communication\",\n          \"Deliver project within agreed timeline\",\n          \"Provide 30 days of post-launch support\",\n          \"Maintain confidentiality of client information\",\n        ],\n        intellectualProperty:\n          \"Upon full payment of all invoices, all intellectual property rights, including but not limited to design, code, and content created specifically for this project, will transfer to the Client. The Provider retains rights to general methodologies, techniques, and any pre-existing intellectual property.\",\n        confidentiality:\n          \"Both parties agree to maintain confidentiality of all proprietary information shared during the course of this project. This includes but is not limited to business strategies, technical specifications, and any sensitive business information.\",\n        termination:\n          \"Either party may terminate this agreement with 30 days written notice. In the event of termination, the Client will pay for all work completed up to the termination date. Any work in progress will be delivered in its current state.\",\n        disputeResolution:\n          \"Any disputes arising from this agreement will first be addressed through good faith negotiation. If resolution cannot be reached, disputes will be resolved through binding arbitration in accordance with the rules of the American Arbitration Association.\",\n        governingLaw:\n          \"This agreement shall be governed by and construed in accordance with the laws of [Your State/Province], without regard to its conflict of law provisions.\",\n      },\n\n      status: \"draft\",\n      invoiceIds: [],\n      totalInvoiced: 0,\n      totalPaid: 0,\n\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n    }\n\n    return contract\n  }\n\n  // Generate payment schedule based on quote and template\n  private static generatePaymentSchedule(quote: Quote, template: ContractTemplate): PaymentMilestone[] {\n    const baseAmount = quote.finalPrice\n    const schedule: PaymentMilestone[] = []\n\n    // Use template's default schedule as base\n    const templateSchedule = template.defaultPaymentStructure.schedule\n\n    // Calculate timeline distribution\n    const timelineWeeks = quote.timeline.includes(\"week\")\n      ? Number.parseInt(quote.timeline.split(\"-\")[0]) || 4\n      : quote.timeline.includes(\"month\")\n        ? (Number.parseInt(quote.timeline.split(\"-\")[0]) || 2) * 4\n        : 8\n\n    const startDate = new Date()\n\n    templateSchedule.forEach((milestone, index) => {\n      const dueDate = new Date(startDate)\n      dueDate.setDate(startDate.getDate() + (index + 1) * Math.floor((timelineWeeks * 7) / templateSchedule.length))\n\n      schedule.push({\n        id: `milestone-${Date.now()}-${index}`,\n        milestoneNumber: milestone.milestoneNumber,\n        name: milestone.name,\n        description: milestone.description,\n        percentage: milestone.percentage,\n        amount: baseAmount * (milestone.percentage / 100),\n        dueDate: dueDate.toISOString().split(\"T\")[0],\n        deliverables: milestone.deliverables,\n        dependencies: milestone.dependencies,\n        status: \"pending\",\n      })\n    })\n\n    return schedule\n  }\n\n  // Populate contract template with data\n  static populateTemplate(template: ContractTemplate, contract: EnhancedContract): string {\n    let populatedContent = \"\"\n\n    // Combine all sections\n    const fullTemplate = Object.values(template.sections).join(\"\\n\\n\")\n\n    // Create placeholder values from contract data\n    const placeholderValues: Record<string, any> = {\n      contract_date: new Date().toLocaleDateString(),\n      client_name: contract.clientName,\n      provider_name: \"Your Company Name\", // This should come from settings\n      business_name: contract.projectDetails.originalQuoteData?.businessName || contract.clientName,\n      industry: contract.projectDetails.originalQuoteData?.industry || \"Technology\",\n      page_count: contract.projectDetails.originalQuoteData?.pageCount || 5,\n      features_list: contract.projectDetails.scope.map((item) => `• ${item}`).join(\"\\n\"),\n      timeline: contract.projectDetails.timeline,\n      start_date: new Date(contract.projectDetails.startDate).toLocaleDateString(),\n      end_date: new Date(contract.projectDetails.endDate).toLocaleDateString(),\n      total_amount: contract.paymentStructure.totalAmount.toLocaleString(),\n      currency: contract.paymentStructure.currency,\n      payment_schedule: contract.paymentStructure.schedule\n        .map(\n          (milestone) =>\n            `${milestone.milestoneNumber}. ${milestone.name} - ${milestone.percentage}% (${contract.paymentStructure.currency} ${milestone.amount.toLocaleString()}) - Due: ${new Date(milestone.dueDate).toLocaleDateString()}`,\n        )\n        .join(\"\\n\"),\n      payment_terms: contract.paymentStructure.paymentTerms,\n      late_fee_percentage: contract.paymentStructure.lateFeePercentage || 1.5,\n      additional_deliverables: contract.projectDetails.deliverables\n        .slice(4)\n        .map((item) => `• ${item}`)\n        .join(\"\\n\"),\n      intellectual_property_terms: contract.contractTerms.intellectualProperty,\n      client_responsibilities: contract.contractTerms.clientResponsibilities.map((item: string) => `• ${item}`).join(\"\\n\"),\n      provider_responsibilities: contract.contractTerms.providerResponsibilities.map((item: string) => `• ${item}`).join(\"\\n\"),\n      confidentiality_terms: contract.contractTerms.confidentiality,\n      termination_terms: contract.contractTerms.termination,\n      dispute_resolution: contract.contractTerms.disputeResolution,\n      governing_law: contract.contractTerms.governingLaw,\n      client_title: \"Owner/Manager\",\n      provider_title: \"Owner/Director\",\n    }\n\n    // Replace placeholders\n    populatedContent = fullTemplate\n    Object.entries(placeholderValues).forEach(([key, value]) => {\n      const placeholder = new RegExp(`{{${key}}}`, \"g\")\n      populatedContent = populatedContent.replace(placeholder, String(value))\n    })\n\n    return populatedContent\n  }\n\n  // Generate invoice from contract milestone\n  static generateInvoiceFromMilestone(contract: EnhancedContract, milestoneId: string): Partial<Invoice> {\n    const milestone = contract.paymentStructure.schedule.find((m) => m.id === milestoneId)\n    if (!milestone) {\n      throw new Error(`Milestone ${milestoneId} not found`)\n    }\n\n    const invoiceNumber = `INV-${new Date().getFullYear()}-${String(Date.now()).slice(-6)}`\n\n    return {\n      id: `invoice-${Date.now()}`,\n      invoiceNumber,\n      clientName: contract.clientName,\n      clientEmail: contract.clientEmail,\n      clientAddress: \"Address not provided\",\n\n      items: [\n        {\n          id: `item-${Date.now()}`,\n          description: `${milestone.name} - ${contract.projectDetails.title}`,\n          quantity: 1,\n          price: milestone.amount,\n        },\n      ],\n\n      status: \"Draft\" as const,\n      issueDate: new Date(),\n      dueDate: new Date(milestone.dueDate),\n      notes: `Milestone ${milestone.milestoneNumber}: ${milestone.description}\\n\\nDeliverables:\\n${milestone.deliverables.map((d) => `• ${d}`).join(\"\\n\")}`,\n    }\n  }\n\n  // Update contract with invoice information\n  static updateContractWithInvoice(\n    contract: EnhancedContract,\n    invoice: Invoice,\n    milestoneId: string,\n  ): EnhancedContract {\n    const updatedSchedule = contract.paymentStructure.schedule.map((milestone) => {\n      if (milestone.id === milestoneId) {\n        return {\n          ...milestone,\n          status: \"invoiced\" as const,\n          invoiceId: invoice.id,\n        }\n      }\n      return milestone\n    })\n\n    return {\n      ...contract,\n      paymentStructure: {\n        ...contract.paymentStructure,\n        schedule: updatedSchedule,\n      },\n      invoiceIds: [...contract.invoiceIds, invoice.id || ''],\n      totalInvoiced: contract.totalInvoiced + (invoice.items?.reduce((sum, item) => sum + (item.price * item.quantity), 0) || 0),\n      updatedAt: new Date().toISOString(),\n    }\n  }\n\n  // Get available templates\n  static getTemplates(): ContractTemplate[] {\n    return this.templates.filter((t) => t.isActive)\n  }\n\n  // Get template by ID\n  static getTemplate(id: string): ContractTemplate | undefined {\n    return this.templates.find((t) => t.id === id && t.isActive)\n  }\n\n  // Validate contract data\n  static validateContract(contract: Partial<EnhancedContract>): { isValid: boolean; errors: string[] } {\n    const errors: string[] = []\n\n    if (!contract.clientName) errors.push(\"Client name is required\")\n    if (!contract.projectDetails?.title) errors.push(\"Project title is required\")\n    if (!contract.projectDetails?.description) errors.push(\"Project description is required\")\n    if (!contract.paymentStructure?.totalAmount || contract.paymentStructure.totalAmount <= 0) {\n      errors.push(\"Valid total amount is required\")\n    }\n    if (!contract.paymentStructure?.schedule || contract.paymentStructure.schedule.length === 0) {\n      errors.push(\"Payment schedule is required\")\n    }\n\n    // Validate payment schedule totals 100%\n    if (contract.paymentStructure?.schedule) {\n      const totalPercentage = contract.paymentStructure.schedule.reduce(\n        (sum, milestone) => sum + milestone.percentage,\n        0,\n      )\n      if (Math.abs(totalPercentage - 100) > 0.01) {\n        errors.push(\"Payment schedule must total 100%\")\n      }\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n    }\n  }\n\n  // Generate contract preview\n  static generatePreview(contract: EnhancedContract, templateId = \"web-design-template\"): string {\n    const template = this.getTemplate(templateId)\n    if (!template) {\n      throw new Error(`Template ${templateId} not found`)\n    }\n\n    return this.populateTemplate(template, contract)\n  }\n}\n\nexport default EnhancedContractTemplateService\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}