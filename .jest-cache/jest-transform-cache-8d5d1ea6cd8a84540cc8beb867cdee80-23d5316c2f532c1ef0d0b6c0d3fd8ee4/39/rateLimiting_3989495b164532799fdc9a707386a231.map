{"version":3,"names":["cov_29r9yo3aeh","actualCoverage","s","AdaptiveRateLimiter","f","CircuitBreaker","RateLimiter","RequestThrottler","createRateLimitMiddleware","rateLimitConfigs","constructor","config","store","Map","skipSuccessfulRequests","skipFailedRequests","keyGenerator","req","b","ip","message","statusCode","cleanupInterval","setInterval","cleanup","now","Date","key","entry","entries","resetTime","delete","getKey","check","windowStart","windowMs","get","count","firstRequest","set","allowed","maxRequests","remaining","Math","max","onLimitReached","reset","getStats","totalRequests","values","totalKeys","size","destroy","clearInterval","clear","queue","activeRequests","Set","lastRequestTime","requestCounter","maxConcurrent","priority","generateRequestId","processQueue","length","timeSinceLastRequest","delay","setTimeout","sortQueue","requestInfo","shift","add","id","result","request","resolve","error","reject","reverse","sort","a","throttle","Promise","timestamp","push","queueLength","totalProcessed","forEach","Error","systemLoad","baseConfig","loadCheckInterval","updateSystemLoad","stats","min","adjustRateLimit","console","warn","loadFactor","floor","getSystemLoad","failureThreshold","recoveryTimeout","successThreshold","failures","lastFailureTime","state","successCount","execute","operation","onSuccess","onFailure","getState","rateLimiter","res","next","setHeader","toISOString","status","json","retryAfter","ceil","strict","moderate","lenient","api","auth"],"sources":["C:\\Users\\chase\\Downloads\\crm (32)\\src\\utils\\rateLimiting.ts"],"sourcesContent":["'use client';\n\ninterface RateLimitConfig {\n  windowMs: number; // Time window in milliseconds\n  maxRequests: number; // Maximum requests per window\n  skipSuccessfulRequests?: boolean;\n  skipFailedRequests?: boolean;\n  keyGenerator?: (req: any) => string;\n  onLimitReached?: (req: any) => void;\n  message?: string;\n  statusCode?: number;\n}\n\ninterface RateLimitEntry {\n  count: number;\n  resetTime: number;\n  firstRequest: number;\n}\n\ninterface ThrottleConfig {\n  delay: number; // Delay between requests in milliseconds\n  maxConcurrent?: number; // Maximum concurrent requests\n  priority?: 'fifo' | 'lifo' | 'priority';\n}\n\ninterface RequestInfo {\n  id: string;\n  timestamp: number;\n  priority?: number;\n  resolve: (value: any) => void;\n  reject: (error: any) => void;\n  request: () => Promise<any>;\n}\n\nclass RateLimiter {\n  private store: Map<string, RateLimitEntry> = new Map();\n  private config: RateLimitConfig;\n  private cleanupInterval: NodeJS.Timeout;\n\n  constructor(config: RateLimitConfig) {\n    this.config = {\n      skipSuccessfulRequests: false,\n      skipFailedRequests: false,\n      keyGenerator: (req) => req.ip || 'default',\n      message: 'Too many requests',\n      statusCode: 429,\n      ...config\n    };\n\n    // Cleanup expired entries every minute\n    this.cleanupInterval = setInterval(() => {\n      this.cleanup();\n    }, 60000);\n  }\n\n  private cleanup(): void {\n    const now = Date.now();\n    for (const [key, entry] of this.store.entries()) {\n      if (entry.resetTime <= now) {\n        this.store.delete(key);\n      }\n    }\n  }\n\n  private getKey(req: any): string {\n    return this.config.keyGenerator!(req);\n  }\n\n  public check(req: any): { allowed: boolean; remaining: number; resetTime: number } {\n    const key = this.getKey(req);\n    const now = Date.now();\n    const windowStart = now - this.config.windowMs;\n\n    let entry = this.store.get(key);\n\n    if (!entry || entry.resetTime <= now) {\n      // Create new entry or reset expired entry\n      entry = {\n        count: 0,\n        resetTime: now + this.config.windowMs,\n        firstRequest: now\n      };\n      this.store.set(key, entry);\n    }\n\n    // Check if within rate limit\n    const allowed = entry.count < this.config.maxRequests;\n    const remaining = Math.max(0, this.config.maxRequests - entry.count - 1);\n\n    if (allowed) {\n      entry.count++;\n    } else if (this.config.onLimitReached) {\n      this.config.onLimitReached(req);\n    }\n\n    return {\n      allowed,\n      remaining,\n      resetTime: entry.resetTime\n    };\n  }\n\n  public reset(req: any): void {\n    const key = this.getKey(req);\n    this.store.delete(key);\n  }\n\n  public getStats(): { totalKeys: number; totalRequests: number } {\n    let totalRequests = 0;\n    for (const entry of this.store.values()) {\n      totalRequests += entry.count;\n    }\n    return {\n      totalKeys: this.store.size,\n      totalRequests\n    };\n  }\n\n  public destroy(): void {\n    if (this.cleanupInterval) {\n      clearInterval(this.cleanupInterval);\n    }\n    this.store.clear();\n  }\n}\n\nclass RequestThrottler {\n  private queue: RequestInfo[] = [];\n  private activeRequests: Set<string> = new Set();\n  private config: ThrottleConfig;\n  private lastRequestTime: number = 0;\n  private requestCounter: number = 0;\n\n  constructor(config: ThrottleConfig) {\n    this.config = {\n      maxConcurrent: 5,\n      priority: 'fifo',\n      ...config\n    };\n  }\n\n  private generateRequestId(): string {\n    return `req_${Date.now()}_${++this.requestCounter}`;\n  }\n\n  private async processQueue(): Promise<void> {\n    if (this.queue.length === 0) return;\n    if (this.activeRequests.size >= this.config.maxConcurrent!) return;\n\n    const now = Date.now();\n    const timeSinceLastRequest = now - this.lastRequestTime;\n\n    if (timeSinceLastRequest < this.config.delay) {\n      setTimeout(() => this.processQueue(), this.config.delay - timeSinceLastRequest);\n      return;\n    }\n\n    // Sort queue based on priority strategy\n    this.sortQueue();\n\n    const requestInfo = this.queue.shift();\n    if (!requestInfo) return;\n\n    this.activeRequests.add(requestInfo.id);\n    this.lastRequestTime = now;\n\n    try {\n      const result = await requestInfo.request();\n      requestInfo.resolve(result);\n    } catch (error) {\n      requestInfo.reject(error);\n    } finally {\n      this.activeRequests.delete(requestInfo.id);\n      // Process next request after a delay\n      setTimeout(() => this.processQueue(), this.config.delay);\n    }\n  }\n\n  private sortQueue(): void {\n    switch (this.config.priority) {\n      case 'lifo':\n        // Last in, first out - reverse order\n        this.queue.reverse();\n        break;\n      case 'priority':\n        // Sort by priority (higher number = higher priority)\n        this.queue.sort((a, b) => (b.priority || 0) - (a.priority || 0));\n        break;\n      case 'fifo':\n      default:\n        // First in, first out - maintain order\n        break;\n    }\n  }\n\n  public async throttle<T>(\n    request: () => Promise<T>,\n    priority: number = 0\n  ): Promise<T> {\n    return new Promise((resolve, reject) => {\n      const requestInfo: RequestInfo = {\n        id: this.generateRequestId(),\n        timestamp: Date.now(),\n        priority,\n        resolve,\n        reject,\n        request\n      };\n\n      this.queue.push(requestInfo);\n      this.processQueue();\n    });\n  }\n\n  public getStats(): {\n    queueLength: number;\n    activeRequests: number;\n    totalProcessed: number;\n  } {\n    return {\n      queueLength: this.queue.length,\n      activeRequests: this.activeRequests.size,\n      totalProcessed: this.requestCounter\n    };\n  }\n\n  public clear(): void {\n    // Reject all pending requests\n    this.queue.forEach(req => {\n      req.reject(new Error('Request queue cleared'));\n    });\n    this.queue = [];\n  }\n}\n\n// Adaptive rate limiter that adjusts based on system load\nclass AdaptiveRateLimiter extends RateLimiter {\n  private systemLoad: number = 0;\n  private loadCheckInterval: NodeJS.Timeout;\n  private baseConfig: RateLimitConfig;\n\n  constructor(config: RateLimitConfig) {\n    super(config);\n    this.baseConfig = { ...config };\n    \n    // Monitor system load every 30 seconds\n    this.loadCheckInterval = setInterval(() => {\n      this.updateSystemLoad();\n    }, 30000);\n  }\n\n  private async updateSystemLoad(): Promise<void> {\n    try {\n      // Simulate system load calculation\n      // In a real implementation, this would check CPU, memory, etc.\n      const stats = this.getStats();\n      this.systemLoad = Math.min(stats.totalRequests / 1000, 1); // Normalize to 0-1\n      \n      // Adjust rate limit based on load\n      this.adjustRateLimit();\n    } catch (error) {\n      console.warn('Failed to update system load:', error);\n    }\n  }\n\n  private adjustRateLimit(): void {\n    // Reduce rate limit when system load is high\n    const loadFactor = 1 - (this.systemLoad * 0.5); // Reduce by up to 50%\n    this.config.maxRequests = Math.floor(this.baseConfig.maxRequests * loadFactor);\n    this.config.windowMs = Math.floor(this.baseConfig.windowMs * (1 + this.systemLoad * 0.5));\n  }\n\n  public getSystemLoad(): number {\n    return this.systemLoad;\n  }\n\n  public destroy(): void {\n    super.destroy();\n    if (this.loadCheckInterval) {\n      clearInterval(this.loadCheckInterval);\n    }\n  }\n}\n\n// Circuit breaker for API protection\nclass CircuitBreaker {\n  private failures: number = 0;\n  private lastFailureTime: number = 0;\n  private state: 'closed' | 'open' | 'half-open' = 'closed';\n  private successCount: number = 0;\n\n  constructor(\n    private failureThreshold: number = 5,\n    private recoveryTimeout: number = 60000, // 1 minute\n    private successThreshold: number = 3\n  ) {}\n\n  public async execute<T>(operation: () => Promise<T>): Promise<T> {\n    if (this.state === 'open') {\n      if (Date.now() - this.lastFailureTime > this.recoveryTimeout) {\n        this.state = 'half-open';\n        this.successCount = 0;\n      } else {\n        throw new Error('Circuit breaker is open');\n      }\n    }\n\n    try {\n      const result = await operation();\n      this.onSuccess();\n      return result;\n    } catch (error) {\n      this.onFailure();\n      throw error;\n    }\n  }\n\n  private onSuccess(): void {\n    this.failures = 0;\n    \n    if (this.state === 'half-open') {\n      this.successCount++;\n      if (this.successCount >= this.successThreshold) {\n        this.state = 'closed';\n      }\n    }\n  }\n\n  private onFailure(): void {\n    this.failures++;\n    this.lastFailureTime = Date.now();\n    \n    if (this.failures >= this.failureThreshold) {\n      this.state = 'open';\n    }\n  }\n\n  public getState(): { state: string; failures: number; lastFailureTime: number } {\n    return {\n      state: this.state,\n      failures: this.failures,\n      lastFailureTime: this.lastFailureTime\n    };\n  }\n\n  public reset(): void {\n    this.failures = 0;\n    this.lastFailureTime = 0;\n    this.state = 'closed';\n    this.successCount = 0;\n  }\n}\n\n// Rate limiting middleware factory\nexport function createRateLimitMiddleware(config: RateLimitConfig) {\n  const rateLimiter = new RateLimiter(config);\n\n  return (req: any, res: any, next: any) => {\n    const result = rateLimiter.check(req);\n\n    // Add rate limit headers\n    res.setHeader('X-RateLimit-Limit', config.maxRequests);\n    res.setHeader('X-RateLimit-Remaining', result.remaining);\n    res.setHeader('X-RateLimit-Reset', new Date(result.resetTime).toISOString());\n\n    if (!result.allowed) {\n      res.status(config.statusCode || 429).json({\n        error: config.message || 'Too many requests',\n        retryAfter: Math.ceil((result.resetTime - Date.now()) / 1000)\n      });\n      return;\n    }\n\n    next();\n  };\n}\n\n// Predefined rate limit configurations\nexport const rateLimitConfigs = {\n  strict: {\n    windowMs: 15 * 60 * 1000, // 15 minutes\n    maxRequests: 100\n  },\n  moderate: {\n    windowMs: 15 * 60 * 1000, // 15 minutes\n    maxRequests: 500\n  },\n  lenient: {\n    windowMs: 15 * 60 * 1000, // 15 minutes\n    maxRequests: 1000\n  },\n  api: {\n    windowMs: 60 * 1000, // 1 minute\n    maxRequests: 60\n  },\n  auth: {\n    windowMs: 15 * 60 * 1000, // 15 minutes\n    maxRequests: 5\n  }\n};\n\n// Export classes and types\nexport {\n  RateLimiter,\n  RequestThrottler,\n  AdaptiveRateLimiter,\n  CircuitBreaker\n};\n\nexport type {\n  RateLimitConfig,\n  RateLimitEntry,\n  ThrottleConfig,\n  RequestInfo\n};"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;I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","ignoreList":[]}